{% load static %}

<button
  type="button"
  class="btn btn-light border border-dark my-2 w-100"
  data-bs-toggle="modal"
  data-bs-target="#modal-media"
>
  Добавить файл
</button>


<div
  class="modal fade"
  id="modal-media"
  tabindex="-1"
  aria-labelledby="Media"
  aria-hidden="true"
>
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="Media">
          Изменение файлов:
        </h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">

        
        <form method="post" enctype="multipart/form-data" class="mb-4">
          {% csrf_token %}
          {% for field in media_form %}
            {% include "users/includes/field.html" %}
          {% endfor %}
          <button type="submit" name="media_submit" class="btn btn-light border border-dark mt-2">Добавить</button>
        </form>


        <hr>

        {% for media in user.media.all %}
          <p class="fs-6 text-primary">
            {{media}}
            <form method="post">
              {% csrf_token %}
              <button type="submit" name="media_del"><i class="bi bi-trash"></i></button>
            </form>
          </p>
        {% endfor %}
        <form method="post">
          {% csrf_token %}
          <select name="service" class="form-control form-control" required id="id_service">
            <option value="" selected>---------</option>
            {% for file in user.media.all %}
              <option value="{{file.id}}">{{file.name}} --- {{file.file}}</option>
            {% endfor %}
          </select>
          <button type="submit" name="media_del" class="btn btn-light border border-dark mt-2">Удалить</button>
        </form>


      </div>
    </div>
  </div>
</div>
